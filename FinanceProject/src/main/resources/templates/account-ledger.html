<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Account Ledger</title>
    <style>
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #ccc;
            padding: 10px;
        }
        .nav-buttons a {
            margin-right: 10px;
        }
        table { 
            border-collapse: collapse; 
            width: 90%; 
            margin-bottom: 20px; 
        }
        table, th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>
    <header th:replace="~{fragments/navbar :: navbar}"></header>
    <div class="container">
        <h1>Ledger for Account: <span th:text="${account.accountName}"></span></h1>
        <table>
            <thead>
            <tr>
                <th>Date</th>
                <th>Post Reference</th>
                <th>Description</th>
                <th>Debit</th>
                <th>Credit</th>
                <th>Balance</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="entry : ${ledgerEntries}">
                <!-- Adjust "entry.date" if your field is entryDate -->
                <td th:text="${entry.entryDate}"></td>
                <td>
                    <a th:href="@{'/journal/view/' + ${entry.id}}"
                       class="entry-link" 
                       th:text="${entry.id}"></a>
                </td>
                <td th:text="${entry.description != null ? entry.description : 'No Description'}"></td>
                <!-- If you use transient getters for totals, you may replace these as needed -->
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(entry.totalDebit, 1, 'COMMA', 2, 'POINT')}"></td>
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(entry.totalCredit, 1, 'COMMA', 2, 'POINT')}"></td>
                <!-- Assuming balance is stored/derived in JournalEntry -->
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(entry.totalDebit.add(entry.totalCredit), 1, 'COMMA', 2, 'POINT')}"></td>
                <!-- The clickable entry ID: -->
            </tr>
            <tr th:if="${ledgerEntries == null or #lists.isEmpty(ledgerEntries)}">
                <td colspan="6">No ledger entries available.</td>
            </tr>
            </tbody>
        </table>
        <a th:href="@{/accounts}">Back to Chart of Accounts</a>
    </div>
</body>
</html>
